(this["webpackJsonpsolid-kitchen"]=this["webpackJsonpsolid-kitchen"]||[]).push([[0],{379:function(e,t,n){},381:function(e,t,n){},452:function(e,t){},511:function(e,t,n){"use strict";n.r(t);var c=n(7),a=n(0),r=n.n(a),i=n(22),s=n.n(i),o=(n(379),n(4)),j=n.n(o),u=n(10),l=n(13),d=(n(381),n(9)),b=n(217),O=n(69),h=n(30),p=n(87),f=n(19),g=n(26),x=n(17),m=n(541),v=n(545),y=n(63),S=n(128),w=n(53),D={name:{predicate:w.FOAF.name,parse:S.getStringNoLocale,set:S.setStringNoLocale},tags:{predicate:w.FOAF.focus,parse:d.getAndParse,set:d.stringifyAndSet},steps:{predicate:w.FOAF.plan,parse:d.getAndParse,set:d.stringifyAndSet},ingredients:{predicate:w.FOAF.maker,parse:d.getAndParse,set:d.stringifyAndSet}},C=n(538),A=n(542),k=n(543);var N=function(e){var t,n=e.onSubmit,r=Object(a.useState)(!1),i=Object(l.a)(r,2),s=i[0],o=i[1],b=Object(a.useState)({ingredients:[],steps:[]}),O=Object(l.a)(b,2),h=O[0],p=O[1],v=Object(a.useState)(),y=Object(l.a)(v,2),S=y[0],w=y[1],N=Object(a.useState)(!1),F=Object(l.a)(N,2),E=F[0],R=F[1],T=Object(a.useState)({}),P=Object(l.a)(T,2),L=P[0],I=P[1],B=Object(a.useState)(!1),Q=Object(l.a)(B,2),q=Q[0],U=Q[1],K=Object(a.useState)(),H=Object(l.a)(K,2),M=H[0],_=H[1];function J(e){return function(t){var n=t.target;I(Object(g.a)(Object(g.a)({},L),{},Object(f.a)({},e,n.value)))}}function z(){return(z=Object(u.a)(j.a.mark((function e(){var t,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,Object(d.saveThing)(S);case 3:return t=e.sent,console.log("saved recipe:",t),e.next=7,Object(d.loadThing)(t,D);case 7:c=e.sent,console.log("saved recipe:",c),n(c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){w(Object(d.newThing)("recipe"))}),[]),Object(c.jsxs)(d.Card,{children:[Object(c.jsx)(C.a,{fullWidth:!0,onChange:(t="name",function(e){var n=e.target;p(Object(g.a)(Object(g.a)({},h),{},Object(f.a)({},t,n.value))),w(Object(d.setAttr)(S,D[t],n.value))}),placeholder:"Something delicious...",label:"What's cooking?"}),Object(c.jsx)("h4",{children:"Ingredients"}),Object(c.jsx)("ul",{children:h.ingredients&&h.ingredients.map((function(e){var t=e.qty,n=e.item;return Object(c.jsx)("li",{children:Object(c.jsxs)(d.Row,{align:"center",children:[Object(c.jsx)("p",{children:t}),Object(c.jsx)("h3",{children:n})]})},n)}))}),E&&Object(c.jsxs)(d.Row,{children:[Object(c.jsx)(C.a,{className:"flex-100",onChange:J("qty"),placeholder:"1 tbsp",label:"Quantity"}),Object(c.jsx)(C.a,{className:"flex-200",onChange:J("item"),placeholder:"9 ONIONS???",label:"New Ingredient"}),Object(c.jsx)(m.a,{color:"primary",onClick:function(){var e=[].concat(Object(x.a)(h.ingredients),[L]);p(Object(g.a)(Object(g.a)({},h),{},{ingredients:e})),w(Object(d.setAttr)(S,D.ingredients,e)),I({}),R(!1)},children:Object(c.jsx)("span",{className:"material-icons",children:"done"})})]}),Object(c.jsx)(A.a,{color:"primary",onClick:function(){R(!E)},children:Object(c.jsx)("span",{className:"material-icons",children:E?"close":"add"})}),Object(c.jsx)("h4",{children:"Instructions"}),Object(c.jsx)("ol",{children:h.steps&&h.steps.map((function(e,t){return Object(c.jsx)("li",{children:Object(c.jsx)(d.Row,{align:"center",children:Object(c.jsx)("p",{children:e})})},"step-".concat(t))}))}),q&&Object(c.jsxs)(d.Row,{children:[Object(c.jsx)(C.a,{className:"flex-100",onChange:function(e){var t=e.target;return _(t.value)},placeholder:"Be awesome.",label:"New Step"}),Object(c.jsx)(m.a,{color:"primary",onClick:function(){var e=[].concat(Object(x.a)(h.steps),[M]);p(Object(g.a)(Object(g.a)({},h),{},{steps:e})),w(Object(d.setAttr)(S,D.steps,e)),_({}),U(!1)},children:Object(c.jsx)("span",{className:"material-icons",children:"done"})})]}),Object(c.jsx)(A.a,{color:"primary",onClick:function(){return U(!q)},children:Object(c.jsx)("span",{className:"material-icons",children:q?"close":"add"})}),Object(c.jsx)(A.a,{variant:"contained",color:"primary",className:"self-end",onClick:function(){return z.apply(this,arguments)},children:s?Object(c.jsx)(k.a,{}):"Save"})]})},F=n(547),E=n(93),R={light:"#f0f0ef",dark:"#5b5348",primary:"#379968",secondary:"#c7a487"};var T=function(e){var t=e.recipe,n=e.onDragEnd,a=e.onDrag,r=void 0===a?function(){}:a;return Object(c.jsx)(O.b,{style:{width:"95%"},to:"/recipes/".concat(Object(d.resourceName)(t.thing.url)),children:Object(c.jsxs)(d.Card,{className:"click",draggable:"true",onDragStart:function(e){e.dataTransfer.setData("json",JSON.stringify(t)),r()},onDragEnd:n,children:[Object(c.jsx)(d.Title,{children:t.name}),Object(c.jsx)(d.Row,{children:t.tags&&t.tags.map((function(e){return Object(c.jsx)(F.a,{label:e,size:"small"},e)}))}),Object(c.jsx)(E.Spacer,{height:".5em"}),Object(c.jsx)(d.Divider,{theme:R}),Object(c.jsx)(d.Label,{children:"Needs"}),Object(c.jsx)(d.CardContent,{children:t.ingredients.map((function(e){return e.item})).join(", ")})]})})},P=n(544),L=n(74);var I=function(e){var t=e.data,n=e.onSubmit,r=e.onDelete,i=Object(a.useState)(""),s=Object(l.a)(i,2),o=s[0],j=s[1];return Object(c.jsxs)(d.Row,{children:[t.map((function(e){return Object(c.jsx)(F.a,{onDelete:function(){return r(e)},color:"primary",label:e,size:"small"},e)})),Object(c.jsx)(C.a,{color:"primary",style:{flex:1},placeholder:"add tag...",value:o,onChange:function(e){return j(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&o&&(j(""),n(o))}})]})};function B(){var e=Object(p.a)(["\n  display: flex;\n  border-bottom: 1px solid lightgray;\n  min-width: 48%;\n"]);return B=function(){return e},e}function Q(){var e=Object(p.a)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  margin: 0 1em;\n"]);return Q=function(){return e},e}var q=function(e){var t=e.recipes,n=e.deleteRecipe,r=e.updateRecipe,i=Object(h.g)().recipe_id,s=Object(a.useContext)(d.SaveState),o=s.queue,j=s.updateQueue,u=Object(a.useState)({}),b=Object(l.a)(u,2),p=b[0],v=b[1],y=Object(a.useState)({}),S=Object(l.a)(y,2),w=S[0],k=S[1],N=Object(a.useState)(!1),F=Object(l.a)(N,2),E=F[0],T=F[1],L=Object(a.useState)({}),B=Object(l.a)(L,2),Q=B[0],q=B[1];function H(e,t,n){return function(c){var a=p[e],i=n?Object(g.a)(Object(g.a)({},a[t]),{},Object(f.a)({},n,c.target.value)):c.target.value;a=[].concat(Object(x.a)(a.slice(0,t)),[i],Object(x.a)(a.slice(t+1)));var s=Object(g.a)(Object(g.a)({},p),{},Object(f.a)({},e,a)),u=Object(d.setAttr)(p.thing,D[e],a);j(Object(d.addToUpdateQueue)(o,u)),v(s),r(s)}}function M(e){return function(t){q(Object(g.a)(Object(g.a)({},Q),{},Object(f.a)({},e,t.target.value)))}}function _(){var e=p.ingredients?[].concat(Object(x.a)(p.ingredients),[Q]):[Q],t=Object(d.setAttr)(p.thing,D.ingredients,e);j(Object(d.addToUpdateQueue)(o,t));var n=Object(g.a)(Object(g.a)({},p),{},{thing:t,ingredients:e});v(n),r(n),T(!1)}function J(e){return function(t){"Enter"===t.key&&e()}}return Object(a.useEffect)((function(){t&&t.length&&v(t.find((function(e){return e.thing.url.indexOf(i)>=0})))}),[i,t]),p.name?Object(c.jsxs)(U,{children:[Object(c.jsxs)(d.Row,{children:[Object(c.jsx)(d.Title,{children:p.name}),Object(c.jsx)(d.Spacer,{}),Object(c.jsx)(O.b,{to:"/",children:Object(c.jsx)(m.a,{color:"secondary",onClick:function(){return n(p)},children:Object(c.jsx)("span",{className:"material-icons",children:"delete"})})})]}),Object(c.jsx)(P.a,{theme:R}),Object(c.jsxs)(d.Row,{wrap:"wrap",children:[p.ingredients.map((function(e,t){return"ing"===w.value&&w.index===t?Object(c.jsxs)(K,{children:[Object(c.jsx)(C.a,{color:"primary",style:{width:"100px"},value:e.qty,onChange:H("ingredients",t,"qty"),onKeyPress:J((function(){return k({})}))}),Object(c.jsx)(C.a,{color:"primary",style:{flex:"1"},value:e.item,onChange:H("ingredients",t,"item"),onKeyPress:J((function(){return k({})}))})]}):Object(c.jsxs)(K,{onDoubleClick:function(){return k({value:"ing",index:t})},children:[e.qty," ",Object(c.jsx)("b",{children:e.item})]},e.item)})),E?Object(c.jsxs)(K,{children:[Object(c.jsx)(C.a,{color:"primary",style:{width:"100px"},placeholder:"1 tbsp",onChange:M("qty"),onKeyPress:J(_)}),Object(c.jsx)(C.a,{color:"primary",style:{flex:"1"},placeholder:"Love",onChange:M("item"),onKeyPress:J(_)})]}):Object(c.jsx)(A.a,{style:{width:"100%"},onClick:function(){return T(!0)},children:Object(c.jsx)("span",{className:"material-icons",children:"add"})})]}),Object(c.jsxs)("section",{children:[Object(c.jsx)(d.Subtitle,{children:"Instructions"}),Object(c.jsx)("ol",{children:p.steps.map((function(e,t){return"steps"===w.value&&w.index===t?Object(c.jsx)("li",{children:Object(c.jsx)(C.a,{color:"primary",style:{width:"100%"},value:e,onChange:H("steps",t),onKeyPress:J((function(){return k({})}))})}):Object(c.jsx)("li",{onDoubleClick:function(){return k({value:"steps",index:t})},children:e},e)}))})]}),Object(c.jsx)(I,{data:p.tags||[],onSubmit:function(e){var t=p.tags?[].concat(Object(x.a)(p.tags),[e]):[e],n=Object(d.setAttr)(p.thing,D.tags,t);j(Object(d.addToUpdateQueue)(o,n));var c=Object(g.a)(Object(g.a)({},p),{},{thing:n,tags:t});v(c),r(c)},onDelete:function(e){var t=p.tags.indexOf(e),n=[].concat(Object(x.a)(p.tags.slice(0,t)),Object(x.a)(p.tags.slice(t+1))),c=Object(d.setAttr)(p.thing,D.tags,n);j(Object(d.addToUpdateQueue)(o,c));var a=Object(g.a)(Object(g.a)({},p),{},{thing:c,tags:n});v(a),r(a)}})]}):Object(c.jsx)(c.Fragment,{})},U=L.default.div(Q()),K=L.default.span(B());var H=function(e){var t=e.visible,n=e.planRecipe,r=Object(a.useState)(""),i=Object(l.a)(r,2),s=i[0],o=i[1];function j(e){return function(t){t.preventDefault(),o(e)}}function u(e){e.preventDefault(),o("")}function b(e){return function(t){var c=JSON.parse(t.dataTransfer.getData("json"));n(c,e),o("")}}return Object(c.jsxs)(d.SideBar,{side:"right",className:t?"":"hidden",children:[Object(c.jsx)(d.SimpleBucket,{theme:R,className:"mon"===s?"match":"",onDragEnter:j("mon"),onDragOver:j("mon"),onDragLeave:u,onDrop:b("mon"),children:"monday"}),Object(c.jsx)(d.SimpleBucket,{theme:R,className:"tue"===s?"match":"",onDragEnter:j("tue"),onDragOver:j("tue"),onDragLeave:u,onDrop:b("tue"),children:"tuesday"}),Object(c.jsx)(d.SimpleBucket,{theme:R,className:"wed"===s?"match":"",onDragEnter:j("wed"),onDragOver:j("wed"),onDragLeave:u,onDrop:b("wed"),children:"wednesday"}),Object(c.jsx)(d.SimpleBucket,{theme:R,className:"thu"===s?"match":"",onDragEnter:j("thu"),onDragOver:j("thu"),onDragLeave:u,onDrop:b("thu"),children:"thursday"}),Object(c.jsx)(d.SimpleBucket,{theme:R,className:"fri"===s?"match":"",onDragEnter:j("fri"),onDragOver:j("fri"),onDragLeave:u,onDrop:b("fri"),children:"friday"}),Object(c.jsx)(d.SimpleBucket,{theme:R,className:"sat"===s?"match":"",onDragEnter:j("sat"),onDragOver:j("sat"),onDragLeave:u,onDrop:b("sat"),children:"saturday"}),Object(c.jsx)(d.SimpleBucket,{theme:R,className:"sun"===s?"match":"",onDragEnter:j("sun"),onDragOver:j("sun"),onDragLeave:u,onDrop:b("sun"),children:"sunday"})]})};var M=function(e){var t=e.recipes,n=e.deleteRecipe,r=e.addRecipe,i=e.updateRecipe,s=e.planRecipe,o=Object(a.useState)(!1),j=Object(l.a)(o,2),u=j[0],b=j[1],O=Object(a.useState)(""),p=Object(l.a)(O,2),f=p[0],g=p[1],x=Object(a.useState)(null),m=Object(l.a)(x,2),v=m[0],y=m[1];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(h.a,{path:"/recipes",exact:window.innerWidth<500,children:Object(c.jsxs)(d.Pane,{children:[Object(c.jsxs)(d.Row,{justify:"flex-start",align:"center",children:[t&&!t.length&&Object(c.jsx)("h3",{children:"No recipes yet..."}),t&&t.length&&Object(c.jsx)(C.a,{style:{flex:1},placeholder:"Search...",onChange:function(e){return g(e.target.value)}}),Object(c.jsx)(A.a,{variant:u?"text":"contained",onClick:function(){return b(!u)},color:"primary",children:Object(c.jsx)("span",{children:u?"cancel":"add recipe"})})]}),u&&Object(c.jsx)(N,{onSubmit:function(e){r(e),b(!1)}}),t&&t.filter((function(e){return!f||e.name.toLowerCase().indexOf(f)>=0||e.ingredients.findIndex((function(e){return e.item.toLowerCase().indexOf(f)>=0}))>=0||e.tags&&e.tags.findIndex((function(e){return e.toLowerCase().indexOf(f)>=0}))>=0})).map((function(e){return Object(c.jsx)(T,{recipe:e,onDrag:function(){return y(!0)},onDragEnd:function(){return y(!1)}},e.thing.url)}))]})}),Object(c.jsx)(h.a,{path:"/recipes/:recipe_id",children:Object(c.jsx)(q,{recipes:t,deleteRecipe:n,updateRecipe:i})}),Object(c.jsx)(H,{visible:v,planRecipe:s})]})},_={mon:{predicate:w.FOAF.mbox,parse:d.getAndParse,set:d.stringifyAndSet},tue:{predicate:w.FOAF.topic,parse:d.getAndParse,set:d.stringifyAndSet},wed:{predicate:w.FOAF.weblog,parse:d.getAndParse,set:d.stringifyAndSet},thu:{predicate:w.FOAF.theme,parse:d.getAndParse,set:d.stringifyAndSet},fri:{predicate:w.FOAF.focus,parse:d.getAndParse,set:d.stringifyAndSet},sat:{predicate:w.FOAF.status,parse:d.getAndParse,set:d.stringifyAndSet},sun:{predicate:w.FOAF.surname,parse:d.getAndParse,set:d.stringifyAndSet}},J=n(63),z=J.Dialog,W=J.DialogTitle,G=J.DialogContent;var V=function(e){var t=e.mealplan,n=e.open,a=e.onClose;return Object(c.jsxs)(z,{open:n,onClose:a,scroll:"paper",children:[Object(c.jsx)(W,{children:"Shopping List"}),Object(c.jsx)(G,{children:Object(c.jsx)("ul",{children:function(e){var t=[];for(var n in e)e[n].length&&(t=[].concat(Object(x.a)(t),Object(x.a)(e[n])));return t.reduce((function(e,t){return[].concat(Object(x.a)(e),Object(x.a)(t.ingredients.map((function(e){return e.item}))))}),[]).reduce((function(e,t){return e.findIndex((function(e){return e===t}))<0?[].concat(Object(x.a)(e),[t]):e}),[]).sort()}(t).map((function(e){return Object(c.jsx)("li",{children:e},e)}))})})]})};function X(){var e=Object(p.a)(["\n  position: absolute;\n  bottom: 1em;\n  right: 1em;\n"]);return X=function(){return e},e}var Y=function(e){var t=e.plan,n=e.onChange,r=Object(a.useContext)(d.SaveState),i=r.queue,s=r.updateQueue,o=Object(a.useState)(!1),j=Object(l.a)(o,2),u=j[0],b=j[1];return Object(c.jsxs)(d.Column,{width:"100%",children:[["mon","tue","wed","thu","fri","sat","sun"].map((function(e){return Object(c.jsxs)("div",{children:[Object(c.jsx)(d.Header,{children:e}),Object(c.jsxs)(d.Row,{wrap:"wrap",children:[t[e].map((function(e){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(E.Spacer,{width:".5em"}),Object(c.jsx)(T,{recipe:e},e.thing.url),Object(c.jsx)(E.Spacer,{width:".5em"})]})})),!t[e].length&&Object(c.jsx)(O.b,{to:"/recipes",children:Object(c.jsx)(A.a,{color:"primary",children:"Add recipes to plan..."})})]})]},e)})),Object(c.jsx)(Z,{children:Object(c.jsxs)(d.Row,{justify:"flex-end",children:[Object(c.jsx)(A.a,{onClick:function(){var e={thing:t.thing,mon:[],tue:[],wed:[],thu:[],fri:[],sat:[],sun:[]};n(e),s(Object(d.addToUpdateQueue)(i,Object(d.setAllAttr)(t.thing,_,e)))},color:"secondary",children:"Clear Plan"}),Object(c.jsx)(A.a,{color:"primary",variant:"contained",style:{alignSelf:"flex-end"},onClick:function(){return b(!0)},children:"Shopping List"})]})}),Object(c.jsx)(V,{open:u,onClose:function(){return b(!1)},mealplan:t})]})},Z=L.default.div(X());function $(){var e=Object(p.a)(["\n  display: flex;\n  background: ",";\n  flex-direction: row;\n  flex-wrap: wrap;\n  grid-area: main;\n"]);return $=function(){return e},e}function ee(){var e=Object(p.a)(["\n  background: ",';\n  height: 100%;\n  display: grid;\n  grid-template-rows: 5.2em 1fr;\n  grid-template-areas: \n    "header"\n    "main";\n']);return ee=function(){return e},e}var te=function(e){var t=e.name,n=e.data,r=Object(a.useState)(),i=Object(l.a)(r,2),s=i[0],o=i[1],b=Object(a.useState)({}),p=Object(l.a)(b,2),S=p[0],w=p[1],C=Object(a.useState)({mon:[],tue:[],wed:[],thu:[],fri:[],sat:[],sun:[]}),A=Object(l.a)(C,2),k=A[0],N=A[1],F=Object(a.useContext)(d.SaveState),E=F.queue,R=F.updateQueue,T=F.saveFromQ,P=Object(h.f)();function L(){return(L=Object(u.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.filter(Object(d.nameFilter)("recipe")).map((function(e){return Object(d.loadThing)(e.url,D)})));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(u.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.deleteThing)(t.thing);case 2:n=s.findIndex((function(e){return e.thing.url===t.thing.url})),o([].concat(Object(x.a)(s.slice(0,n)),Object(x.a)(s.slice(n+1)))),console.log("Deleted "+t.name);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(u.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=s.findIndex((function(e){return e.thing.url===t.thing.url})),o([].concat(Object(x.a)(s.slice(0,n)),[t],Object(x.a)(s.slice(n+1)))),console.log("Updated "+t.name);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){n&&function(e){return L.apply(this,arguments)}(n).then(o)}),[n]),Object(a.useEffect)((function(){function e(){return(e=Object(u.a)(j.a.mark((function e(t){var n,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={mon:[],tue:[],wed:[],thu:[],fri:[],sat:[],sun:[]},!(c=t.find(Object(d.nameFilter)("meal-plan")))){e.next=8;break}return e.next=5,Object(d.loadThing)(c.url,_);case 5:a=e.sent,e.next=11;break;case 8:return e.next=10,Object(d.initThing)("meal-plan",n,_);case 10:a=e.sent;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n&&function(t){return e.apply(this,arguments)}(n).then(N)}),[n]),Object(c.jsxs)(ne,{children:[Object(c.jsxs)(d.HeaderBar,{theme:d.THEME,children:[Object(c.jsxs)("h2",{children:[t?"".concat(t,"'s"):"My"," Kitchen"]}),Object(c.jsx)(d.Spacer,{}),Object(c.jsx)(O.b,{to:"/"===P.pathname?"/recipes":"/",children:Object(c.jsx)(m.a,{color:"inherit",children:Object(c.jsx)("span",{className:"material-icons",children:"/"===P.pathname?"event_note":"date_range"})})}),Object(c.jsx)(O.b,{to:"/profile",children:Object(c.jsx)(m.a,{color:"inherit",children:Object(c.jsx)("span",{className:"material-icons",children:"person"})})})]}),Object(c.jsx)(ce,{children:Object(c.jsxs)(h.c,{children:[Object(c.jsxs)(h.a,{path:"/recipes",children:[Object(c.jsx)(M,{deleteRecipe:function(e){return I.apply(this,arguments)},recipes:s,updateRecipe:function(e){return B.apply(this,arguments)},addRecipe:function(e){o([].concat(Object(x.a)(s),[e]))},planRecipe:function(e,t){var n,c=k[t];if(c.findIndex((function(t){return t.thing.url===e.thing.url}))>=0)w({msg:"".concat(e.name," already exists on ").concat(t.toUpperCase(),"."),severity:"warning"});else{var a=Object(d.setAttr)(k.thing,_[t],[].concat(Object(x.a)(c),[e]));R(Object(d.addToUpdateQueue)(E,a)),N(Object(g.a)(Object(g.a)({},k),{},(n={},Object(f.a)(n,t,[].concat(Object(x.a)(c),[e])),Object(f.a)(n,"thing",a),n))),w({msg:"Added ".concat(e.name," to ").concat(t.toUpperCase(),"."),severity:"success"})}}}),Object(c.jsx)(v.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:!!S.msg,message:S.msg,action:Object(c.jsx)("span",{className:"material-icons",children:"success"===S.severity?"check_circle":"warning"}),autoHideDuration:3e3,onClose:function(){return w({})}})]}),Object(c.jsx)(h.a,{path:"/",children:Object(c.jsx)(Y,{plan:k,onChange:N})})]})}),Object(c.jsx)(d.SaveButton,{queue:E,save:T,ui:y})]})},ne=L.default.div(ee(),d.THEME.light),ce=L.default.div($(),d.THEME.light),ae=n(537);var re=function(){var e=Object(a.useState)(),t=Object(l.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(),s=Object(l.a)(i,2),o=s[0],p=s[1],f=Object(a.useState)(),g=Object(l.a)(f,2),x=g[0],m=g[1],v=Object(a.useState)([]),S=Object(l.a)(v,2),w=S[0],D=S[1],C=Object(a.useState)(!1),A=Object(l.a)(C,2),k=A[0],N=A[1];function F(){return(F=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.save)(w);case 2:D([]);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){Object(b.getDefaultSession)().handleIncomingRedirect().then((function(e){e.isLoggedIn?r(e.webId):Object(d.appLogin)()}))}),[]),Object(a.useEffect)((function(){n&&(Object(d.loadThing)(n,d.profileStruct).then(p),Object(d.loadDataset)(Object(d.getDomain)(n)+"/kitchen").then((function(e){m(Object(d.getThings)(e))})))}),[n]),Object(c.jsx)(d.SaveState.Provider,{value:{queue:w,updateQueue:D,saveFromQ:function(){return F.apply(this,arguments)}},children:Object(c.jsx)(ae.a,{theme:d.muiTheme,children:Object(c.jsx)(d.Main,{children:Object(c.jsx)(O.a,{children:Object(c.jsxs)(h.c,{children:[Object(c.jsx)(h.a,{path:"/profile",children:Object(c.jsx)(d.SaveState.Consumer,{children:function(e){return Object(c.jsx)(d.Profile,{profile:o,edit:k,toggleEdit:N,ui:y,theme:R,saveState:e,onChange:p})}})}),Object(c.jsx)(h.a,{path:"/",children:o&&Object(c.jsx)(te,{name:o.firstName,data:x})})]})})})})})},ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,549)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(re,{})}),document.getElementById("root")),ie()}},[[511,1,2]]]);
//# sourceMappingURL=main.3f65beb1.chunk.js.map